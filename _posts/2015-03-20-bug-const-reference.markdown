---
layout: post
title:  "debug：返回错误引用"
date:   2015-03-20 
categories: debug
---

这两天修改特征点检测程序，使用pca对特征进行降维。遇到奇怪的问题，程序有时候运行正常，有时候运行出错。
表现在：有些特征点丢失，甚至完全偏离。


刚开始以为使用的几个全局变量可能有问题，就将全局变量去掉。还是无法解决。

也切换gcc版本，也重启linux。无法解决。

后来索性先切到windows，尝试运行一切正常。于是就先把问题放在一边，将pca先都实现。并整理了大部分代码。在windows运行已无障碍。

再切换到linux还是一样的问题。又尝试在mac下运行，还是不行。确定是程序的问题。

同时使用现有代码，用以前的模型，多次测试没有问题。那么确定是新增代码，与pca相关的代码可能有问题。怀疑是竞争条件造成的，仔细检查，没有发现。这时候突然想起，在之前编译程序的时候看到一个```返回错误引用```****的警告。当时没有注意，这时候感觉有点可疑。

**找到该代码， 把函数声明的返回值的引用去掉，done**！！！！！！！

**debug没有头绪的时候，查看看警告也是有用的。**





